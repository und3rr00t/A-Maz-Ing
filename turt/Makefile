PYTHON = python3
PIP = pip
MAIN_SCRIPT = a_maze_ing.py
CONFIG_FILE = config.txt
PACKAGE_DIR = mazegen

RESET = \033[0m
GREEN = \033[32m
YELLOW = \033[33m
RED = \033[31m

.PHONY: all install run debug clean lint lint-strict test

all: run

install:
	@echo "$(GREEN)Installing dependencies...$(RESET)"
	$(PIP) install --upgrade pip
	$(PIP) install -r requirements.txt
	@# If you are building the mazegen package locally:
	@# $(PIP) install -e .

run:
	@echo "$(GREEN)Running A-Maze-ing...$(RESET)"
	$(PYTHON) $(MAIN_SCRIPT) $(CONFIG_FILE)


debug:
	@echo "$(YELLOW)Starting Debugger (pdb)...$(RESET)"
	$(PYTHON) -m pdb $(MAIN_SCRIPT) $(CONFIG_FILE)

clean:
	@echo "$(RED)Cleaning up...$(RESET)"
	rm -rf __pycache__
	rm -rf .mypy_cache
	rm -rf .pytest_cache
	rm -rf $(PACKAGE_DIR)/__pycache__
	rm -rf *.so *.o
	rm -rf build dist *.egg-info
	# Remove the output file generated by the program if needed
	rm -f maze_output.txt


lint:
	@echo "$(YELLOW)Running Flake8...$(RESET)"
	flake8 .
	@echo "$(YELLOW)Running Mypy...$(RESET)"
	mypy --warn-return-any --warn-unused-ignores --ignore-missing-imports --disallow-untyped-defs --check-untyped-defs .


lint-strict:
	@echo "$(YELLOW)Running Strict Linting...$(RESET)"
	flake8 .
	mypy --strict .


test:
	@echo "$(GREEN)Running Tests...$(RESET)"
	pytest
